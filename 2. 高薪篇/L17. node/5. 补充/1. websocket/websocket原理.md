
建立网络通信的几种方式：

# socket

是一个抽象层、一个接口，不是协议。

1. 客户端连接服务器(TCP/IP)，经过三次握手，建立了连接通道
2. 客户端和服务器可以通过socket接口发送/接收任意次消息。任何一端在任何时候，都可以向另一端发送任何消息
3. 有一端断开了，通道就销毁



# http

1. 客户端连接服务器(TCP/IP)，经过三次握手，建立了连接通道
2. 客户端发送一个http格式(带消息头，消息体)的消息，服务器响应一个http格式(带消息头，消息体)的消息。
3. 客户端或服务器断开，通道销毁

注意：之后再想要发一个消息，需要重新进行以上3步。
    当然也可以打开长连接模式。带有connection：keep-alive字段，前提是服务器要认，一般都会认。
    长连接是在进行第二步时，服务器响应完成不着急断开，如果短时间内客户端还要发送请求，服务器就继续响应。
    但是 “客户端发送，服务器响应” 这个模式没有变。
    而且，一般也只会再延长10s左右。


http如何进行实时通信？

1. 在客户端写一个轮询。即定时器，每一秒发一次请求。会造成连接多余。
2. 使用长连接。长连接模式就是客户端发请求，但服务器不给响应。直到某一刻服务器数据变了才发出响应。此时客户端断开连接，但立刻又发送一个连接，等待服务器响应。但也不好，会再开进程。

注意：http原本不能实时通信，因为他需要客户端发请求，所以可以使用以上两种方法。


# websocket

专门用于解决实时传输的问题的协议。
注意：websocket协议是建立在socket接口上的，浏览器有，但是不给你用，所以才有了websocket协议。

1. 客户端连接服务器(TCP/IP)，经过三次握手，建立了连接通道
2. 客户端发送一个http格式(仅有请求头)的消息(特殊格式)，服务器也响应一个http格式的消息(特殊格式)，称之为http握手。
    (http握手：用来确认服务器是否支持websocket协议)
3. 双发自由通信，通信格式按照websocket的要求进行
4. 客户端或服务器断开，通道销毁